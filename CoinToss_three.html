<script>
  (function() {
    var greeting = prompt('Do you want to play? Type yes or no.');
    var winCounter = 0;
    var maxGuesses = 3;

    var Game = function(guess,retry, coinFace) {
      this.guess = ''; //?
      this.retry = true;
      this.coinFace = Math.floor(Math.random() * 2);
    };

    var startGame = function(round) {
      console.log(round.coinFace);
      round.guess = prompt('Heads or tails?');
      while(round.retry && maxGuesses > 0) {
        if(round.guess.toLowerCase() === 'heads' && round.coinFace === 0) {
          alert('It\'s heads. You guessed right!');
          round.retry = false;
          winCounter += 1;
        } else if(round.guess.toLowerCase() === 'tails' && round.coinFace === 1) {
          alert('It\'s tails. You guessed right!');
          round.retry = false;
          winCounter += 1;
        } else {
          maxGuesses -= 1;
          if(round.coinFace === 0) {
            alert('Wrong answer! The answer was heads. Try again');
          } else {
            alert('Wrong answer! The answer was tails. Try again.');
          }
          startGame(round);
        }
      }
    }

    var round1 = new Game();
    if(greeting.toLowerCase() === 'yes') {
      startGame(round1);

      alert('Round two!');
      var round2 = new Game();
      startGame(round2);

      alert('Round three!');
      var round3 = new Game();
      startGame(round3);

      alert('Congrats, you got ' + winCounter + ' out of 3!')
    } else {
      alert('Maybe next time');
    }
  })();
</script>
